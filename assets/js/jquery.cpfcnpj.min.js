!function(l){function u(a,n){if(""==(a=a.replace(/[^\d]+/g,""))||14!=a.length||/^(.)\1+$/.test(a))return!1;for(tamanho=a.length-2,numeros=a.substring(0,tamanho),digitos=a.substring(tamanho),soma=0,pos=tamanho-7,i=tamanho;1<=i;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);if(resultado=soma%11<2?0:11-soma%11,resultado!=digitos.charAt(0))return!1;for(tamanho+=1,numeros=a.substring(0,tamanho),soma=0,pos=tamanho-7,i=tamanho;1<=i;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);return resultado=soma%11<2?0:11-soma%11,resultado==digitos.charAt(1)}function f(a,n){var t=null!=n&&n?/^\d{3}\.\d{3}\.\d{3}\-\d{2}$/:/^[0-9]{11}$/;if(null==a.match(t))return!1;if(null!=a.match(/\b(.+).*(\1.*){10,}\b/g))return!1;var s,e,r=a.replace(/\D/g,"");for(s=0,i=1;i<=9;i++)s+=parseInt(r.substring(i-1,i))*(11-i);if(10!=(e=10*s%11)&&11!=e||(e=0),e!=parseInt(r.substring(9,10)))return!1;for(s=0,i=1;i<=10;i++)s+=parseInt(r.substring(i-1,i))*(12-i);return 10!=(e=10*s%11)&&11!=e||(e=0),e==parseInt(r.substring(10,11))}l.fn.cpfcnpj=function(a){var e=l.extend({mask:!1,validate:"cpfcnpj",event:"focusout",handler:l(this),validateOnlyFocus:!1,ifValid:null,ifInvalid:null,returnType:null},a);if(e.mask)if(null==jQuery().mask)e.mask=!1;else{var n=["000.000.000-009","00.000.000/0000-00"],i=l(this);if("cpf"==e.validate)i.mask(n[0]);else if("cnpj"==e.validate)i.mask(n[1]);else{var r=function(a){return 0===a.length||12<=a.length?n[1]:n[0]},o={onChange:function(a,n,i){var t=l(i),s=t.cleanVal();t.mask(r(s),o)}};i.mask(r,o)}}return this.each(function(){var t=null,s=l(this);l(document).on(e.event,e.handler,function(){if(!e.validateOnlyFocus||e.validateOnlyFocus&&s.is(":focus")){var a=s.val(),n=a.length;if(returnType="CPF ou CNPJ incorretos",t=!1,11!=n&&14!=n&&18!=n||("cpf"==e.validate?t=f(a,e.mask):"cnpj"==e.validate?t=u(a,e.mask):"cpfcnpj"==e.validate&&(f(a,e.mask)?(t=!0,returnType="cpf"):u(a,e.mask)&&(t=!0,returnType="cnpj"))),l.isFunction(e.ifValid))if(null!=t&&t){if(l.isFunction(e.ifValid)){var i=l.Callbacks();i.add(e.ifValid),i.fire(s)}}else l.isFunction(e.ifInvalid)&&e.ifInvalid(s)}})})}}(jQuery);